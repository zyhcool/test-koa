<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <button id="sync">test sync</button>
    <button id="async">test async</button>
    <script>
        let sync_btn = document.querySelector("#sync");
        let async_btn = document.querySelector("#async");
        sync_btn.addEventListener("click", handlerSync)
        async_btn.addEventListener("click", handlerAsync);
        function handlerSync() {
            let ws = new WebSocket("ws://localhost:3000/syncEvent?eventName=test");
            ws.onopen = (e) => {
            }
            ws.onmessage = (e) => {
                console.log("message: ", JSON.parse(e.data));
            }
            ws.onopen = () => {
                document.documentElement.addEventListener("click", (e) => {
                    ws.send(JSON.stringify({
                        name: "sync",
                        pass: "123",
                    }))
                })
            }
        }
        function handlerAsync() {
            let ws = new WebSocket("ws://localhost:3000/asyncEvent?eventName=test");
            ws.onopen = (e) => {
            }
            ws.onmessage = (e) => {
                console.log("message: ", JSON.parse(e.data));
            }
            ws.onopen = () => {
                document.documentElement.addEventListener("click", (e) => {
                    ws.send(JSON.stringify({
                        name: "async",
                        pass: "123",
                    }))
                })
            }
        }


    </script>
</body>

</html>